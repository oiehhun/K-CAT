import { getPath } from 'ts-object-path';
export class BaseQuery {
    where(prop, op, value) {
        return this.applyWhere(this.getWhereProp(prop), op, value);
    }
    whereAll(attributes) {
        if (attributes) {
            const keys = Object.keys(attributes);
            return keys.reduce((query, key) => {
                return query.applyWhere(String(key), '==', attributes[key]);
            }, this);
        }
        return this;
    }
    getWhereProp(prop) {
        if (typeof prop === 'string')
            return prop;
        return getPath(prop).join('.');
    }
    equals(prop, value) {
        return this.where(prop, '==', value);
    }
}
//# sourceMappingURL=query.js.map