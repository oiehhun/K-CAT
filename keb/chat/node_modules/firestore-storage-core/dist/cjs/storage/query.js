"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BaseQuery = void 0;
const ts_object_path_1 = require("ts-object-path");
class BaseQuery {
    where(prop, op, value) {
        return this.applyWhere(this.getWhereProp(prop), op, value);
    }
    whereAll(attributes) {
        if (attributes) {
            const keys = Object.keys(attributes);
            return keys.reduce((query, key) => {
                return query.applyWhere(String(key), '==', attributes[key]);
            }, this);
        }
        return this;
    }
    getWhereProp(prop) {
        if (typeof prop === 'string')
            return prop;
        return (0, ts_object_path_1.getPath)(prop).join('.');
    }
    equals(prop, value) {
        return this.where(prop, '==', value);
    }
}
exports.BaseQuery = BaseQuery;
//# sourceMappingURL=query.js.map